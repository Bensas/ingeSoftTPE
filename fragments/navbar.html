<style>
  .logged-true,
  .logged-false {
    display: none;
  }
</style>

<nav
  id="navbar"
  class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark scrolling-navbar"
>
  <div class="container">
    <!-- Brand -->
    <a id="navbar_title" class="navbar-brand" href="index.html">
      <i class="fa fa-ticket ml-2" aria-hidden="true"></i>
      <strong>TuviTicket</strong>
    </a>

    <!-- Collapse -->
    <button
      class="navbar-toggler"
      type="button"
      data-toggle="collapse"
      data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Links -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <!-- Left -->
      <ul class="navbar-nav mr-auto">
        <li id="navitem_inicio" class="nav-item">
          <a class="nav-link" href="/index.html"
            >Inicio
            <!-- <span class="sr-only">(Actual)</span> -->
          </a>
        </li>
        <li class="nav-item"><a class="nav-link" href="#">Música</a></li>
        <li class="nav-item"><a class="nav-link" href="#">Teatro</a></li>
        <li class="nav-item"><a class="nav-link" href="#">Deportes</a></li>
      </ul>

      <!-- Right -->
      <ul class="navbar-nav nav-flex-icons">
        <li class="nav-item dropdown logged-true">
          <a
            class="nav-link dropdown-toggle"
            data-toggle="dropdown"
            aria-haspopup="true"
            aria-expanded="false"
            >¡Hola, <strong id="user-name"></strong>!</a
          >
          <div class="dropdown-menu dropdown-primary">
            <a class="dropdown-item" href="#">Mi perfil</a>
            <a class="dropdown-item" href="/post-event.html">Crear evento</a>
            <a class="dropdown-item" href="/scripts/session/logout.php"
              >Cerrar sesión</a
            >
          </div>
        </li>
        <li class="nav-item logged-false">
          <a href="/login.html" class="nav-link">
            <i class="fa fa-user-circle" aria-hidden="true"></i> Ingresar
          </a>
        </li>
        <li class="nav-item" id="navitem_cart">
          <a
            class="nav-link waves-effect border border-light rounded"
            href="cart.html"
          >
            <span class="badge red z-depth-1 mr-1"> 6 </span>
            <i class="fa fa-shopping-cart"></i>
            <span class="clearfix d-none d-sm-inline-block"> Carrito </span>
          </a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<script>
  $(function() {
    $.get("/scripts/session/checklogin.php", function(data) {
      var resp = JSON.parse(data);
      if (resp.logged) {
        $("#user-name").html(resp.name.toUpperCase());
        $(".logged-true").show();
        $(".logged-false").hide();
      } else {
        $(".logged-true").hide();
        $(".logged-false").show();
      }
    });
  });
</script>
